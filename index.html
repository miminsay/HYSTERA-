<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>HYSTERA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; font-family: system-ui, sans-serif; }
body { margin: 0; background: #000; color: #eee; display: flex; flex-direction: column; height: 100vh; }
header { padding: 20px; text-align: center; font-size: 2.2rem; letter-spacing: 3px; border-bottom: 1px solid #222; }
#chat { flex: 1; padding: 24px; overflow-y: auto; display: flex; flex-direction: column; gap: 18px; }
.msg { max-width: 78%; padding: 18px 22px; border-radius: 18px; font-size: 1.3rem; line-height: 1.45; word-wrap: break-word; }
.user { align-self: flex-end; background: #1e1e1e; border: 1px solid #333; }
.bot { align-self: flex-start; background: #0f0f0f; border: 1px solid #2a2a2a; }
.system { align-self: center; font-size: 1rem; color: #666; }
footer { display: flex; gap: 12px; padding: 18px; border-top: 1px solid #222; background: #050505; }
textarea { flex: 1; min-height: 70px; max-height: 160px; resize: vertical; padding: 18px; font-size: 1.3rem; background: #0d0d0d; color: #fff; border: 1px solid #333; border-radius: 14px; outline: none; }
button { padding: 18px 26px; font-size: 1.2rem; background: #7a0000; color: #fff; border: none; border-radius: 14px; cursor: pointer; }
button:hover { background: #a00000; }
</style>
</head>
<body>

<header>HYSTERA</header>

<div id="chat"></div>

<footer>
  <textarea id="input" placeholder="fala comigo‚Ä¶ escreve do jeito que quiser üòà"></textarea>
  <button onclick="sendMessage()">Enviar</button>
</footer>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("input");

// mem√≥ria infinita
let memoria = [];

const personagens = [
  { nome: "Seulgi", respostas: ["isso soou pesado‚Ä¶ mas eu entendi.", "tem dias que tudo fica assim mesmo.", "n√£o vou fingir que isso n√£o d√≥i.", "fala mais‚Ä¶ se quiser."] },
  { nome: "Yeri", respostas: ["por que tu falou isso agora?", "isso n√£o parece coincid√™ncia.", "anota mentalmente‚Ä¶ s√≥ por seguran√ßa.", "estranho. continua."] },
  { nome: "Joy", respostas: ["KKKKKKKK eu ri, foi mal.", "energia ca√≥tica, adorei üò≠", "isso foi muito do nada", "continua, isso t√° bom"] },
  { nome: "Irene", respostas: ["isso ficou preso na minha cabe√ßa agora.", "vou pensar nisso mais do que devia.", "interessante. continua."] }
];

// fun√ß√£o pra escolher personagem aleat√≥rio
function rand(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

// fun√ß√£o pra adicionar mensagem
function addMessage(text, type) {
  const div = document.createElement("div");
  div.className = "msg " + type;
  div.innerText = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

// fun√ß√£o que gera resposta usando a mem√≥ria
function gerarResposta(personagem, userText) {
  memoria.push(userText); // salva o que jogador falou
  let resposta = rand(personagem.respostas);

  // respostas adaptativas baseadas na mem√≥ria
  if(memoria.length > 3){
    const last = memoria[memoria.length-2];
    resposta += " tu disse antes: '" + last + "', n√©?";
  }

  if(userText.includes("?")) resposta += " o que tu acha disso?";
  if(userText.length < 4) resposta += " fala direito p√¥ üò≠";
  if(userText.toLowerCase().includes("amo")) resposta += " isso foi fofo demais.";
  if(userText.toLowerCase().includes("odeio")) resposta += " deu pra sentir o √≥dio daqui.";

  return resposta;
}

// resposta do bot
function botReply(userText) {
  const personagem = rand(personagens);
  const resposta = gerarResposta(personagem, userText);

  setTimeout(() => {
    addMessage(`${personagem.nome}: ${resposta}`, "bot");
  }, 500 + Math.random() * 700);
}

// envio da mensagem
function sendMessage() {
  const text = input.value.trim();
  if(!text) return;

  addMessage(text, "user");
  input.value = "";

  botReply(text);
}

// enter pra enviar
input.addEventListener("keydown", e => {
  if(e.key === "Enter" && !e.shiftKey){
    e.preventDefault();
    sendMessage();
  }
});

// mensagem inicial
setTimeout(() => {
  addMessage("Sistema: paciente conectado. mem√≥ria ativa. ningu√©m aqui t√° s√£o üñ§", "system");
}, 600);
</script>

</body>
  </html>

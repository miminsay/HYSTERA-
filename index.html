<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HYSTERA</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

body {
  margin: 0;
  background: #050505;
  color: #e0e0e0;
  font-family: 'Share Tech Mono', monospace;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

#game {
  width: 90%;
  max-width: 420px;
  border: 1px solid #333;
  padding: 20px;
  background: #0a0a0a;
  position: relative;
}

h1 {
  text-align: center;
  letter-spacing: 6px;
}

#status {
  font-size: 13px;
  opacity: 0.7;
  margin-bottom: 10px;
}

#text {
  min-height: 120px;
  margin-bottom: 15px;
}

button {
  width: 100%;
  padding: 14px;
  background: #111;
  border: 1px solid #444;
  color: #fff;
  font-family: inherit;
  cursor: pointer;
}

.glitch {
  animation: glitch 0.2s infinite;
}

@keyframes glitch {
  0% { transform: translate(0); }
  20% { transform: translate(-2px, 2px); }
  40% { transform: translate(2px, -2px); }
  60% { transform: translate(-2px, -1px); }
  80% { transform: translate(1px, 2px); }
  100% { transform: translate(0); }
}

.secret {
  display: none;
  font-size: 12px;
  color: #b30000;
  margin-top: 10px;
}
</style>
</head>

<body>
<div id="game">
  <h1>HYSTERA</h1>
  <div id="status">PRONTUÁRIO ATIVO</div>
  <div id="text"></div>
  <button id="btn">AVANÇAR</button>
  <div id="secret" class="secret"></div>
</div>

<script>
const text = document.getElementById("text");
const btn = document.getElementById("btn");
const status = document.getElementById("status");
const secret = document.getElementById("secret");

let phase = 0;
let clicks = 0;
let secretsUnlocked = 0;

// Sons
const whisper = new Audio("whisper.mp3");
const breath = new Audio("breath.mp3");
const heart = new Audio("heart.mp3");
const glitchSound = new Audio("glitch.mp3");

whisper.loop = true;
breath.loop = true;
heart.loop = true;

const phases = [
  {
    name: "Obsessão",
    text: "Você sente que algo está errado. Clique de novo.",
    action() {
      whisper.play();
    }
  },
  {
    name: "Mania",
    text: "Seu coração dispara. Tudo está rápido demais.",
    action() {
      heart.play();
      document.body.classList.add("glitch");
      setTimeout(()=>document.body.classList.remove("glitch"),1500);
    }
  },
  {
    name: "Depressão",
    text: "Seu corpo pesa. Cada ação demora.",
    action() {
      breath.play();
      btn.disabled = true;
      setTimeout(()=>btn.disabled=false,3000);
    }
  },
  {
    name: "Paranoia",
    text: "Eles estão atrás de você. Não confie em nada.",
    action() {
      glitchSound.play();
      if (navigator.vibrate) navigator.vibrate([200,100,200]);
      btn.onmouseover = () => {
        btn.style.transform =
          `translate(${Math.random()*60-30}px,${Math.random()*60-30}px)`;
      };
    }
  },
  {
    name: "Avaliação Final",
    text: "Você ainda acredita que isso é um jogo?",
    action() {
      whisper.pause();
      heart.pause();
      breath.pause();
    }
  }
];

function next() {
  clicks++;

  if (clicks === 5) {
    secret.style.display = "block";
    secret.innerText = "ARQUIVO 01: Paciente reage bem ao confinamento.";
    secretsUnlocked++;
  }

  if (clicks === 9) {
    secret.style.display = "block";
    secret.innerText = "ARQUIVO 02: Paciente demonstra prazer no controle.";
    secretsUnlocked++;
  }

  if (phase < phases.length) {
    status.innerText = "Estado Mental: " + phases[phase].name;
    text.innerText = phases[phase].text;
    phases[phase].action();
    phase++;
  } else {
    endGame();
  }
}

function endGame() {
  btn.style.display = "none";

  if (secretsUnlocked >= 2) {
    text.innerText =
      "ALTA CONCEDIDA.\nVocê aprendeu a se adaptar ao confinamento.";
  } else {
    text.innerText =
      "INTERNAÇÃO PERMANENTE.\nVocê nunca questionou o suficiente.";
  }

  status.innerText = "DIAGNÓSTICO ENCERRADO";
}

btn.onclick = next;
next();
</script>
</body>
</html>
